import asm

asm.defun('_start')
asm.ldi('vPC')
asm.stw('pvpc')
asm.ldwi('_ldloc')
asm.stw('ldloc')
asm.ldwi('_stloc')
asm.stw('stloc')
asm.ldwi('_thunk0')
asm.stw('thunk0')
asm.ldwi('_thunk1')
asm.stw('thunk1')
asm.ldwi('_main')
asm.call('vAC')
asm.label('halt')
asm.ldwi('halt')
asm.jr()

asm.defun('_ldloc')
asm.addw('sp')
asm.deek()
asm.ret()

asm.defun('_stloc')
asm.addw('sp')
asm.stw('ht')
asm.ldw('ha')
asm.doke('ht')
asm.ret()

asm.defun('_thunk0')
asm.inc('vLRH')
asm.ret()

asm.defun('_thunk1')
asm.stw('ht')
asm.inc('vLRH')
asm.ldi(0xa0)
asm.st('vLR')
asm.ldw('ht')
asm.ret()
