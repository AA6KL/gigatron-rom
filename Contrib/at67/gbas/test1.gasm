_startAddress_  EQU		0x0200
_callTable_     EQU		0x00ee

clearScreen     EQU     0x7FA0
printText       EQU     clearScreen - 0x0100
printVarInt16   EQU     clearScreen - 0x0200
drawChar        EQU     clearScreen - 0x0300
locateCursor    EQU     clearScreen - 0x0400
resetAudio      EQU     clearScreen - 0x0500
playMidi        EQU     clearScreen - 0x0600
midiStartNote   EQU     clearScreen - 0x0700

; Internal variables
register0       EQU     0xA0
register1       EQU     register0 + 0x02
register2       EQU     register0 + 0x04
register3       EQU     register0 + 0x06
register4       EQU     register0 + 0x08
register5       EQU     register0 + 0x0A
register6       EQU     register0 + 0x0C
register7       EQU     register0 + 0x0E
textPosition    EQU     register0 + 0x10
textColour      EQU     register0 + 0x12
cursorXY        EQU     register0 + 0x14
midiStreamPtr   EQU     register0 + 0x16
midiDelay       EQU     register0 + 0x18
frameCountPrev  EQU     register0 + 0x1A

; Includes
%include include/gigatron.i
%include include/audio.i
%include include/clear_screen.i
%include include/print_text.i
%include include/macros.i

; Labels
_init           EQU		0x0200
_32453245324543 EQU		0x021a
_10             EQU		0x021f
_20             EQU		0x023c
_25             EQU		0x0254
_26             EQU		0x0278
_27             EQU		0x027e
_28             EQU		0x0283
_29             EQU		0x0289
_30             EQU		0x028f
_31             EQU		0x02b0
_40             EQU		0x02cb

; Variables
_a              EQU		0x0040
_b              EQU		0x0042
_cat            EQU		0x0044
_d              EQU		0x0046
_e              EQU		0x0048
_f              EQU		0x004a
_g              EQU		0x004c
_z              EQU		0x004e

; Strings
usrStr_0x6fb8		EQU		0x6fb8
usrStr_0x6fb8		DB		4 'dog '
usrStr_0x6fbd		EQU		0x6fbd
usrStr_0x6fbd		DB		4 'cat '
usrStr_0x6fc2		EQU		0x6fc2
usrStr_0x6fc2		DB		13 '1234567890 : '

; Code
_init           LDWI	0x0000
                STW		cursorXY
                LDWI	0x0802
                STW		textPosition
                LDWI	0x0F20
                STW		textColour
                LDWI	0x2020
                CALL	clearScreen

                LDI		1
                STW		_a		; a=1
                STW		_b		; b=a

_32453245324543 LDWI	-3
                STW		_cat		; cat=-3

_10             CALL	updateCursorY
                PrintString	usrStr_0x6fb8
                PrintString	usrStr_0x6fbd
                PrintString	usrStr_0x6fc2
                PrintVarInt16	_a		; print"dog ";"cat ";"1234567890 : "

_20             LDW		_d
                ADDI	5
                STW		0x30
                LDI		20
                ADDW	0x30
                STW		0x30
                LDW		_cat
                SUBW	_a
                STW		0x32
                LDW		0x30
                ADDW	0x32
                STW		_d		; d=20+(d+5)+(cat-a)

_25             LDW		_b
                SUBI	3
                STW		0x30
                LDI		25
                SUBW	_a
                STW		0x32
                LDW		0x30
                ADDW	0x32
                ADDW	_d
                SUBW	_b
                STW		0x32
                LDW		_a
                SUBW	_cat
                SUBW	_d
                STW		0x34
                LDW		0x32
                SUBW	0x34
                STW		_e		; e=b-3+(25-a)+d-b-(a-cat-d)

_26             LDI		64
                SUBW	_e
                STW		_f		; f=54-23+(27*2)-32+(56/3)-7-e

_27             LDWI	-1149
                STW		_g		; g=154-1230+(227*2)-532+(756/33)-17

_28             LDW		_a
                ADDI	1
                STW		_a		; a=a+1

_29             LDW		_b
                SUBI	1
                STW		_b		; b=b-1

_30             LDWI	-2949
                ADDW	_b
                STW		0x30
                LDWI	300
                ADDW	_e
                STW		0x32
                LDWI	-900
                ADDW	_f
                STW		0x34
                LDW		0x32
                SUBW	0x34
                STW		0x34
                LDW		0x30
                SUBW	0x34
                STW		_z		; z=b-(1000+2000-53+2)-(e+300-(f-900))

_31             LDI		0
                SUBW	_g
                STW		0x30
                LDWI	1000
                ADDW	0x30
                STW		0x30
                LDI		24
                SUBW	_g
                STW		0x32
                LDW		0x30
                SUBW	0x32
                ADDW	_f
                STW		_f		; f=-g+1000-(24-g)+f

_40             CALL	_10		; goto10

